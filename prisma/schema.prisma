generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model User {
  id        String   @id @default(cuid())
  clerkId   String   @unique
  email     String   @unique
  name      String?
  role      UserRole @default(MEMBER)
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt
  posts     Post[]

  @@map("users")
}

model Contest {
  id               String    @id @default(cuid())
  title            String
  description      String?
  imageUrl         String?
  deadline         DateTime?
  startDate        DateTime?
  area             String?
  organizer        String
  website          String?
  isActive         Boolean   @default(true)
  createdAt        DateTime  @default(now())
  updatedAt        DateTime  @updatedAt
  incentive        String?
  operatingCompany String?
  targetArea       String?
  targetAudience   String?
  organizerType    String?
  isPopular        Boolean?

  @@index([isActive])
  @@index([area])
  @@index([organizerType])
  @@index([deadline])
  @@index([createdAt])
  @@map("contests")
}

model Event {
  id               String    @id @default(cuid())
  title            String
  description      String?
  imageUrl         String?
  startDate        DateTime
  endDate          DateTime?
  venue            String?
  area             String?
  organizer        String
  website          String?
  isActive         Boolean   @default(true)
  createdAt        DateTime  @default(now())
  updatedAt        DateTime  @updatedAt
  organizerType    String
  operatingCompany String?
  targetArea       String?
  targetAudience   String?

  @@index([isActive])
  @@index([area])
  @@index([organizerType])
  @@index([startDate])
  @@index([createdAt])
  @@map("events")
}

model OpenCall {
  id                 String    @id @default(cuid())
  title              String
  description        String?
  imageUrl           String?
  deadline           DateTime?
  startDate          DateTime?
  area               String?
  organizer          String
  website            String?
  isActive           Boolean   @default(true)
  createdAt          DateTime  @default(now())
  updatedAt          DateTime  @updatedAt
  organizerType      String
  targetArea         String?
  targetAudience     String?
  availableResources String?
  operatingCompany   String?

  @@index([isActive])
  @@index([area])
  @@index([organizerType])
  @@index([deadline])
  @@index([createdAt])
  @@map("open_calls")
}

model News {
  id          String    @id @default(cuid())
  title       String
  description String?
  imageUrl    String?
  company     String
  sector      String?
  amount      String?
  investors   String?
  publishedAt DateTime?
  sourceUrl   String?
  isActive    Boolean   @default(true)
  createdAt   DateTime  @default(now())
  updatedAt   DateTime  @updatedAt
  type        String
  area        String?

  @@index([isActive])
  @@index([type])
  @@index([area])
  @@index([publishedAt])
  @@index([createdAt])
  @@map("news")
}

model Knowledge {
  id          String    @id @default(cuid())
  title       String
  description String?
  imageUrl    String?
  publishedAt DateTime?
  isActive    Boolean   @default(true)
  createdAt   DateTime  @default(now())
  updatedAt   DateTime  @updatedAt
  categoryTag String?
  website     String?
  area        String?

  @@index([isActive])
  @@index([categoryTag])
  @@index([area])
  @@index([publishedAt])
  @@index([createdAt])
  @@map("knowledge")
}

model Facility {
  id                String   @id @default(cuid())
  title             String
  description       String?
  imageUrl          String?
  address           String?
  area              String?
  organizer         String
  website           String?
  isActive          Boolean  @default(true)
  createdAt         DateTime @default(now())
  updatedAt         DateTime @updatedAt
  facilityInfo      String?
  program           String?
  targetArea        String?
  targetAudience    String?
  organizerType     String
  isDropinAvailable Boolean  @default(false)
  isNexanaAvailable Boolean  @default(false)

  @@index([isActive])
  @@index([area])
  @@index([organizerType])
  @@index([isDropinAvailable])
  @@index([isNexanaAvailable])
  @@index([createdAt])
  @@map("facilities")
}

model Post {
  id            String    @id @default(cuid())
  title         String
  description   String?
  content       String
  imageUrl      String?
  category      String?
  tags          String?
  isPublished   Boolean   @default(false)
  publishedAt   DateTime?
  createdAt     DateTime  @default(now())
  updatedAt     DateTime  @updatedAt
  createdBy     String
  createdByUser User      @relation(fields: [createdBy], references: [id])

  @@map("posts")
}

model Location {
  id                     String      @id @default(cuid())
  slug                   String      @unique
  country                String
  city                   String
  description            String?
  topImageUrl            String?
  mapImageUrl            String?
  companyCard1Image      String?
  companyCard1Name       String?
  companyCard1DescTop    String?
  companyCard1DescBottom String?
  companyCard2Image      String?
  companyCard2Name       String?
  companyCard2DescTop    String?
  companyCard2DescBottom String?
  companyCard3Image      String?
  companyCard3Name       String?
  companyCard3DescTop    String?
  companyCard3DescBottom String?
  experienceCard1Image   String?
  experienceCard1Title   String?
  experienceCard1Url     String?
  experienceCard2Image   String?
  experienceCard2Title   String?
  experienceCard2Url     String?
  experienceCard3Image   String?
  experienceCard3Title   String?
  experienceCard3Url     String?
  sightseeingCard1Image  String?
  sightseeingCard1Title  String?
  sightseeingCard2Image  String?
  sightseeingCard2Title  String?
  sightseeingCard3Image  String?
  sightseeingCard3Title  String?
  isActive               Boolean     @default(true)
  createdAt              DateTime    @default(now())
  updatedAt              DateTime    @updatedAt
  workspaces             Workspace[]

  @@index([isActive])
  @@index([slug])
  @@index([city])
  @@index([country])
  @@map("locations")
}

model Workspace {
  id                      String    @id @default(cuid())
  name                    String
  imageUrl                String?
  country                 String
  city                    String
  address                 String?
  officialLink            String?
  businessHours           String?
  hasDropin               Boolean   @default(false)
  hasNexana               Boolean   @default(false)
  hasMeetingRoom          Boolean   @default(false)
  hasPhoneBooth           Boolean   @default(false)
  hasWifi                 Boolean   @default(false)
  hasParking              Boolean   @default(false)
  priceTable              String?
  rental                  String?
  notes                   String?
  operator                String?
  management              String?
  tenantCard1Title        String?
  tenantCard1Desc         String?
  tenantCard1Image        String?
  tenantCard2Title        String?
  tenantCard2Desc         String?
  tenantCard2Image        String?
  tenantCard3Title        String?
  tenantCard3Desc         String?
  tenantCard3Image        String?
  communityManagerImage   String?
  communityManagerTitle   String?
  communityManagerDesc    String?
  communityManagerContact String?
  facilityCard1Title      String?
  facilityCard1Desc       String?
  facilityCard1Image      String?
  facilityCard2Title      String?
  facilityCard2Desc       String?
  facilityCard2Image      String?
  facilityCard3Title      String?
  facilityCard3Desc       String?
  facilityCard3Image      String?
  facilityCard4Title      String?
  facilityCard4Desc       String?
  facilityCard4Image      String?
  facilityCard5Title      String?
  facilityCard5Desc       String?
  facilityCard5Image      String?
  facilityCard6Title      String?
  facilityCard6Desc       String?
  facilityCard6Image      String?
  facilityCard7Title      String?
  facilityCard7Desc       String?
  facilityCard7Image      String?
  facilityCard8Title      String?
  facilityCard8Desc       String?
  facilityCard8Image      String?
  facilityCard9Title      String?
  facilityCard9Desc       String?
  facilityCard9Image      String?
  nearbyHotelTitle        String?
  nearbyHotelDesc         String?
  nearbyHotelUrl          String?
  nearbyHotelImage1       String?
  nearbyHotelImage2       String?
  nearbyHotelImage3       String?
  nearbyHotelImage4       String?
  nearbyHotelImage5       String?
  nearbyHotelImage6       String?
  nearbyHotelImage7       String?
  nearbyHotelImage8       String?
  nearbyHotelImage9       String?
  nearbyFood1Title        String?
  nearbyFood1Desc         String?
  nearbyFood1Image        String?
  nearbyFood2Title        String?
  nearbyFood2Desc         String?
  nearbyFood2Image        String?
  nearbyFood3Title        String?
  nearbyFood3Desc         String?
  nearbyFood3Image        String?
  nearbySpot1Title        String?
  nearbySpot1Desc         String?
  nearbySpot1Image        String?
  nearbySpot2Title        String?
  nearbySpot2Desc         String?
  nearbySpot2Image        String?
  nearbySpot3Title        String?
  nearbySpot3Desc         String?
  nearbySpot3Image        String?
  facilityFeatureOneLine  String?
  categoryWork            Boolean   @default(false)
  categoryConnect         Boolean   @default(false)
  categoryPrototype       Boolean   @default(false)
  categoryPilot           Boolean   @default(false)
  categoryTest            Boolean   @default(false)
  categorySupport         Boolean   @default(false)
  categoryShowcase        Boolean   @default(false)
  categoryLearn           Boolean   @default(false)
  categoryStay            Boolean   @default(false)
  hasMultipleLocations    Boolean   @default(false)
  requiresAdvanceNotice   Boolean   @default(false)
  canDoWebMeeting         Boolean   @default(false)
  hasEnglishSupport       Boolean   @default(false)
  meetsNexanaStandard     Boolean   @default(false)
  isNexanaRecommended     Boolean   @default(false)
  locationId              String?
  location                Location? @relation(fields: [locationId], references: [id], onDelete: SetNull)
  isActive                Boolean   @default(true)
  createdAt               DateTime  @default(now())
  updatedAt               DateTime  @updatedAt

  @@index([isActive])
  @@index([city])
  @@index([country])
  @@index([locationId])
  @@map("workspaces")
}

model WorkspaceLike {
  id            String    @id @default(cuid())
  workspaceId   String
  userIdentifier String   // IPアドレスとUser-Agentの組み合わせ、またはlocalStorageのユニークID
  createdAt     DateTime  @default(now())

  @@unique([workspaceId, userIdentifier])
  @@index([workspaceId])
  @@index([userIdentifier])
  @@map("workspace_likes")
}

model WorkspaceComment {
  id            String    @id @default(cuid())
  workspaceId   String
  userIdentifier String   // IPアドレスとUser-Agentの組み合わせ、またはlocalStorageのユニークID
  userName      String?   // オプション: ユーザー名
  content       String
  createdAt     DateTime  @default(now())
  updatedAt     DateTime  @updatedAt

  @@index([workspaceId])
  @@index([userIdentifier])
  @@index([createdAt])
  @@map("workspace_comments")
}

enum UserRole {
  MEMBER
  EDITOR
  ADMIN
}
